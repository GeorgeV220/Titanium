From bcfcb16940073f3faf39593f64ceb297ca0e8fc2 Mon Sep 17 00:00:00 2001
From: Peridot <peridot491@protonmail.com>
Date: Thu, 8 Sep 2022 01:17:37 +0200
Subject: [PATCH] Don't send empty permission and unknown command message


diff --git a/src/main/java/org/bukkit/craftbukkit/CraftServer.java b/src/main/java/org/bukkit/craftbukkit/CraftServer.java
index ae6d22cba..59dc7d986 100644
--- a/src/main/java/org/bukkit/craftbukkit/CraftServer.java
+++ b/src/main/java/org/bukkit/craftbukkit/CraftServer.java
@@ -786,7 +786,11 @@ public final class CraftServer implements Server {
         UnknownCommandEvent event = new UnknownCommandEvent(sender, commandLine);
         this.pluginManager.callEvent(event);
         if (!event.isCancelled()) {
-            sender.sendMessage(java.text.MessageFormat.format(MessageConfig.get().unknownCommand, event.getCommand())); // Titanium - placeholder of what command was tried to use
+            String message = MessageConfig.get().unknownCommand;
+            if (message == null || message.isEmpty()) {
+                return false;
+            }
+            sender.sendMessage(java.text.MessageFormat.format(message, event.getCommand())); // Titanium - placeholder of what command was tried to use
         }
         // Titanium end
         return false;
-- 
2.38.1.windows.1

