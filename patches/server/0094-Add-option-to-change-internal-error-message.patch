From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Peridot <peridot491@protonmail.com>
Date: Sun, 5 Jun 2022 17:10:31 +0200
Subject: [PATCH] Add option to change internal error message


diff --git a/src/main/java/net/minecraft/server/PlayerConnection.java b/src/main/java/net/minecraft/server/PlayerConnection.java
index 4e4610b248f2b55dd586bcb03ab9e650a888dc27..d30402e4b70b886c871cacb8a3e26b7c3eb02e8e 100644
--- a/src/main/java/net/minecraft/server/PlayerConnection.java
+++ b/src/main/java/net/minecraft/server/PlayerConnection.java
@@ -1193,7 +1193,7 @@ public class PlayerConnection implements PacketListenerPlayIn, IUpdatePlayerList
                 return;
             }
         } catch (org.bukkit.command.CommandException ex) {
-            player.sendMessage(org.bukkit.ChatColor.RED + "An internal error occurred while attempting to perform this command");
+            player.sendMessage(server.serverConfig.spigot.messages.internalErrorCommand);
             java.util.logging.Logger.getLogger(PlayerConnection.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
             SpigotTimings.playerCommandTimer.stopTiming(); // Spigot
             return;
diff --git a/src/main/java/net/titanium/config/SpigotConfig.java b/src/main/java/net/titanium/config/SpigotConfig.java
index 899694cde317c5856d5cfb6859fab20a97ccea52..22d1073d4824ba8d625c609f382efff47d0e3fe9 100644
--- a/src/main/java/net/titanium/config/SpigotConfig.java
+++ b/src/main/java/net/titanium/config/SpigotConfig.java
@@ -134,11 +134,14 @@ public class SpigotConfig extends TitaniumConfigSection {
 
         public String restart = "&cServer is restarting!";
         public String whitelist = "&cYou are not on the whitelist!";
-        public String unknownCommand = "&7Unknown command. Type &c/help &7for help.";
         public String serverFull = "&cThe server is full!";
         public String outdatedClient = "&7Outdated client! Please use &c{0}";
         public String outdatedServer = "&7Outdated server! Server is on &c{0}";
 
+        public String unknownCommand = "&7Unknown command. Type &c/help &7for help.";
+        public String internalErrorCommand = "&cAn internal error occurred while attempting to perform this command";
+        public String internalErrorTabComplete = "&cAn internal error occurred while attempting to tab-complete this command";
+
     }
 
     public Commands commands = new Commands();
diff --git a/src/main/java/org/bukkit/craftbukkit/CraftServer.java b/src/main/java/org/bukkit/craftbukkit/CraftServer.java
index 235b8f8bbd0ebe4fd9b4f2e8fa48b60c9faff3ad..49b658c89620178ce3fbfd4e09053c6e61b7f37b 100644
--- a/src/main/java/org/bukkit/craftbukkit/CraftServer.java
+++ b/src/main/java/org/bukkit/craftbukkit/CraftServer.java
@@ -1728,7 +1728,7 @@ public final class CraftServer implements Server {
                 completions = getCommandMap().tabComplete(player, message.substring(1), new Location(player.getWorld(), blockPosition.getX(), blockPosition.getY(), blockPosition.getZ()));
             }
         } catch (CommandException ex) {
-            player.sendMessage(ChatColor.RED + "An internal error occurred while attempting to tab-complete this command");
+            player.sendMessage(serverConfig.spigot.messages.internalErrorTabComplete);
             getLogger().log(Level.SEVERE, "Exception when " + player.getName() + " attempted to tab complete " + message, ex);
         }
 
